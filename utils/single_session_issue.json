{
  "issues": [
    {
      "title": "Auto-close previous session when starting new session",
      "labels": ["p2", "robustness", "needs-triage", "estimate: 2h"],
      "estimate": "2h",
      "body": {
        "location": "src/ai_session_tracker_mcp/server.py - start_ai_session()",
        "current_state": "When starting a new session, if a previous session was not properly closed, it remains open indefinitely. This can lead to multiple concurrent sessions which may cause confusion in tracking and metrics.",
        "problem": "Users may forget to end sessions or sessions may not be closed due to errors/crashes. This leaves orphaned sessions in an active state, making it difficult to track actual work and potentially causing incorrect metrics calculations.",
        "proposed_solution": "When start_ai_session() is called, automatically check for any active (unclosed) sessions. If found, auto-close them by setting their end_time to the current timestamp before creating the new session. This ensures only one session is ever active at a time.",
        "success_criteria": "1. Only one session can be active at any time\n2. Previous unclosed sessions are automatically closed when a new session starts\n3. The auto-closed session's end_time is set appropriately\n4. A warning or log message indicates when a session was auto-closed",
        "files_affected": [
          "src/ai_session_tracker_mcp/server.py",
          "src/ai_session_tracker_mcp/storage.py"
        ]
      }
    }
  ]
}
